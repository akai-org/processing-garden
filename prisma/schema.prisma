generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  email       String        @id
  name        String
  image       String
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  Progress    Progress[]
  SandboxUser SandboxUser[]
}

model Progress {
  id        String @id @default(uuid())
  taskId    String // learning, games - snake, tic-tac-toe
  stepId    Int
  points    Int    @default(1)
  user      User   @relation(fields: [userEmail], references: [email])
  userEmail String
}

model Sandbox {
  id          String        @id @default(uuid())
  code        String
  SandboxUser SandboxUser[]
}

model SandboxUser {
  sandbox   Sandbox @relation(fields: [sandboxId], references: [id])
  sandboxId String
  user      User    @relation(fields: [userEmail], references: [email])
  userEmail String

  @@id([userEmail, sandboxId])
}
